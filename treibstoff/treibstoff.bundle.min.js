var ts=function(t,e){"use strict";const s="http://www.w3.org/2000/svg";function r(t,e){for(let s in e)t.setAttributeNS(null,s,e[s])}function i(t,e,i){let n=document.createElementNS(s,t);return r(n,e),void 0!==i&&i.appendChild(n),n}function n(t,e){var s=i("svg",{});s.innerHTML=t.trim();let r=[],n=s.childNodes;for(let t=0;t<n.length;t++){let i=n[t];r.push(i),s.removeChild(i),void 0!==e&&e.appendChild(i)}return r}class h{constructor(t,e,s){this._inst=t,this._name=e,this._val=null,Object.defineProperty(t,e,{get:this.get.bind(this),set:this.set.bind(this),enumerable:!0}),void 0!==s&&(t[e]=s)}get(){return this._val}set(t){let e=t!==this._val;this._val=t,e&&this.trigger(`on_${this._name}`,t)}trigger(t,e){let s=this._inst;s.trigger&&s.trigger(t,e)}}class a extends h{constructor(t,e,s){super(t,e),this._ctxa="elem",s?(this._ctxa=void 0!==s.ctxa?s.ctxa:this._ctxa,this._ctx=void 0!==s.ctx?s.ctx:t[this._ctxa],this._tgt=void 0!==s.tgt?s.tgt:e):(this._ctx=t[this._ctxa],this._tgt=e);let r=s?s.val:void 0;void 0!==r&&(t[e]=r)}get name(){return this._name}get val(){return this._val}get ctx(){return this._ctx||(this._ctx=this._inst[this._ctxa]),this._ctx}get tgt(){return this._tgt}}class o extends a{constructor(t,e,s){super(t,e,s),this.extract=s?s.extract:null,this.state_evt=s&&s.state_evt?s.state_evt:"on_prop_state",this.error=!1,this.msg="",this._err_marker={},this.ctx.on("change",this._change.bind(this))}set(t){e(this.ctx).val(t),this._set(t)}_change(t){let s=e(t.currentTarget).val();this._set(s)}_set(t){(t=this._extract(t))!==this._err_marker&&super.set(t),this.extract&&this.trigger(this.state_evt,this)}_extract(t){if(this.extract)try{t=this.extract(t),this.error=!1,this.msg=""}catch(e){t=this._err_marker,this.error=!0,this.msg=e}return t}}class c extends a{constructor(t,e,s){super(t,e,s),this.ctx.on("mousedown",this._down.bind(this)),this.ctx.on("mouseup",this._up.bind(this))}set(t){this.ctx.text(t),super.set(t)}_down(t){this.trigger(`on_${this.name}_down`,this)}_up(t){this.trigger(`on_${this.name}_up`,this)}}class l{constructor(t){this.widget=t,this.handlers={}}walk(t){let e=t.childNodes;for(let t=0;t<e.length;t++)this.walk(e[t]);t.nodeType===Node.ELEMENT_NODE&&this.parse(t)}parse(t){let e=this.node_attrs(t),s=this.wrap_node(t);this.handle_elem_attr(s,e);let r=t.tagName.toLowerCase(),i=this.handlers[r];i&&i(s,e)}node_attrs(t){let e={};for(let s in t.attributes){let r=t.attributes[s];r&&r.nodeName&&(e[r.nodeName]=r.nodeValue)}return e}wrap_node(t){return t}handle_elem_attr(t,e){let s=e["t-elem"];s&&(this.widget[s]=t)}}function u(t){if(isNaN(t))throw"Input is not a number";return Number(t)}class _ extends l{constructor(t){super(t),this.handlers={input:this.handle_input.bind(this),select:this.handle_select.bind(this),button:this.handle_button.bind(this)},this.extractors={number:u}}wrap_node(t){return e(t)}handle_input(t,e){let s=e["t-prop"];if(!s)return;let r=this.widget,i=this.extractors[e["t-type"]];e["t-extract"]&&(i=r[e["t-extract"]]);let n=e["t-val"];i&&(n=i(n)),new o(r,s,{ctx:t,ctxa:e["t-elem"],val:n,extract:i,state_evt:e["t-state-evt"]})}handle_select(t,e){let s=e["t-options"];if(s)for(let e of JSON.parse(s))t.append(`<option value="${e[0]}">${e[1]}</option>`);this.handle_input(t,e)}handle_button(t,e){let s=e["t-prop"];s&&new c(this.widget,s,{ctx:t,ctxa:e["t-elem"],val:e["t-val"]})}}class d extends l{}t.Ajax=class{constructor(){console.log("Hello Ajax"),console.log(e)}},t.AttrProperty=class extends a{set(t){this.ctx.attr(this.tgt,t),super.set(t)}},t.BoundProperty=a,t.ButtonProperty=c,t.CSSProperty=class extends a{set(t){e(this.ctx).css(this.tgt,t),super.set(t)}},t.DataProperty=class extends a{constructor(t,e,s){s?s.ctx=void 0!==s.ctx?s.ctx:t.data:s={ctx:t.data},s.ctxa="data",super(t,e,s)}set(t){this.ctx[this.tgt]=t,super.set(t)}},t.Events=class{constructor(){this._subscribers={},this._suppress_events=!1}on(t,e){let s=this._subscribers[t];return void 0===s&&(this._subscribers[t]=s=new Array),this._contains_subscriber(t,e)||s.push(e),this}off(t,e){let s=this._subscribers[t];if(void 0===s)return this;if(!e)return delete this._subscribers[t],this;let r=s.indexOf(e);return r>-1&&(s=s.splice(r,1)),this._subscribers[t]=s,this}trigger(t,e){if(this._suppress_events)return;this[t]&&this[t](e);let s=this._subscribers[t];if(!s)return this;for(let t=0;t<s.length;t++)s[t](this,e);return this}suppress_events(t){this._suppress_events=!0,t(),this._suppress_events=!1}_contains_subscriber(t,e){let s=this._subscribers[t];if(!s)return!1;for(let t=0;t<s.length;t++)if(s[t]===e)return!0;return!1}},t.HTMLParser=_,t.InputProperty=o,t.Parser=l,t.Property=h,t.SVGParser=d,t.SVGProperty=class extends a{set(t){let e={};e[this._name]=t,r(this.ctx,e),super.set(t)}},t.TextProperty=class extends a{set(t){this.ctx.text(t),super.set(t)}},t.compile_svg=function(t,e,s){let r=n(e,s),i=new d(t);return r.forEach((function(t,e){i.walk(t)})),r},t.compile_template=function(t,s,r){let i=e(s.trim());r&&r.append(i);let n=new _(t);return i.each((function(){n.walk(this)})),i},t.create_svg_elem=i,t.extract_number=u,t.json_merge=function(t,e){let s={};for(let r of[t,e])for(let t in r)s[t]=r[t];return s},t.load_svg=function(t,s){e.get(t,function(t){let r=e(t).find("svg");r.removeAttr("xmlns:a"),s(r)}.bind(this),"xml")},t.parse_svg=n,t.set_svg_attrs=r,t.svg_ns=s,t.uuid4=function(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(t=>(t^crypto.getRandomValues(new Uint8Array(1))[0]&15>>t/4).toString(16)))},Object.defineProperty(t,"__esModule",{value:!0});var p=window.ts;return t.noConflict=function(){return window.ts=p,this},window.ts=t,t}({},jQuery);
//# sourceMappingURL=treibstoff.bundle.min.js.map
